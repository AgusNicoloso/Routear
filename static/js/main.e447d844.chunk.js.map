{"version":3,"sources":["logo.svg","forms/ErrorMessage.jsx","forms/inputs/InputText.jsx","components/FullSpinner.jsx","components/InlineSpinner.jsx","modals/FormModal.jsx","libs/object-path.js","flows/ResourceFlow/actions.js","exceptions.js","settings.js","apis/main.js","libs/object-path-immutable.js","flows/Flow/flow.js","flows/ResourceFlow/flow.js","flows/AuthFlow/actions.js","forms/FormGroup.jsx","forms/LabelledGroup.jsx","modals/UserModal.jsx","contexts/ResourceModalContext.jsx","modals/keymaps.js","contexts/ModalsContext.jsx","components/AddButton.jsx","modals/index.jsx","views/Home.jsx","App.js","serviceWorker.js","flows/index.js","flows/UserFlow.js","index.js"],"names":["module","exports","connect","name","skipTouch","formik","error","errors","touch","getIn","touched","className","classNames","InputText","renderField","props","placeholder","isSubmitting","innerRef","password","disabled","submitOnChnage","prefix","notErrorMessage","others","extraCalassNames","split","type","value","values","this","InputGroup","InputGroupAddon","addonType","Component","FullSpinner","sizeUnit","size","color","React","InlineSpinner","withModal","focus","isModalOpen","firstInput","current","timerId","setTimeout","onClose","toggleModal","onSubmit","children","console","log","axios","post","then","response","catch","e","clearTimeout","prevProps","submitted","submitting","closeModal","onSubmitted","loading","modalLevel","dirty","isOpen","toggle","fade","ModalBody","ModalHeader","working","Form","ModalFooter","Button","onClick","toStr","Object","prototype","toString","hasOwnProperty","obj","prop","call","isEmpty","isArray","length","i","Array","getKey","key","startsWith","endsWith","innerKey","slice","intKey","parseInt","factory","options","objectPath","keys","reduce","proxy","bind","hasShallowProperty","includeInheritedProps","getShallowProperty","set","path","doNotReplace","map","currentPath","currentValue","has","j","ensureExists","insert","at","arr","get","splice","empty","isBoolean","isObject","push","apply","arguments","coalesce","paths","defaultValue","len","nextObj","del","mod","create","withInheritedProps","SEARCH","createResource","resource","body","action","updateResource","id","ValidationException","UnknownException","description","AuthorizationException","settings","assign","API_URL","process","SENTRY_DSN","getTokenHeaders","token","fetchMain","url","method","status","a","extraHeaders","params","attributes","some","attr","slug","config","headers","JSON","stringify","filter","k","encodeURIComponent","join","fetch","text","results","parse","getResource","fetchResources","filters","patchResource","deleteResource","_hasOwnProperty","isNumber","isString","assignToObj","target","source","clone","createIfEmpty","assumeArray","deepMerge","dest","src","isPlainObject","merged","changeImmutable","changeCallback","api","clonedObj","finalPath","updater","concat","first","Error","undefined","immutable","objectPathImmutable","committed","transaction","args","getActionStepType","step","toUpperCase","Flow","rootPath","actionInitialState","done","abort","requested","failed","completed","aborted","actions","initialState","isFlowAction","resolvePattern","resolvePatternLatest","stepAction","onStart","onError","onDone","onAbort","onFinish","reduceStart","reduceError","reduceDone","reduceAbort","reduceFinish","reduceActionDone","reduceAction","reducer","sagas","saga","runAction","indexOf","answer","extra","actionInfo","select","state","flowState","Sentry","info","run","put","cancelled","loop","moment","valueOf","newState","actionPath","merge","all","takeLatest","takeEvery","ResourceFlow","useParser","isTokenForRefresh","timestamp","isBefore","add","reduceClean","reduceExists","parseResource","reduceNew","reduceDelete","reduceFetch","result","elem","reduceSearch","count","total_count","reduceSelect","actual","defaultObj","clearSearch","actionPathGet","actionPathSelect","actionPathClean","actionPathCreate","actionPathClone","actionPathUpdate","actionPathPatch","actionPathDelete","actionPathFetch","actionPathSearch","runGet","runSelect","runClean","runCreate","runClone","runUpdate","runPatch","runDelete","runFetch","tempFilters","limit","runSearch","q","offset","o","order","onErrorGet","onErrorSelect","onErrorClean","onErrorCreate","onErrorClone","onErrorUpdate","onErrorPatch","onErrorDelete","onErrorFetch","onErrorSearch","onAbortGet","onAbortSelect","onAbortClean","onAbortCreate","onAbortClone","onAbortUpdate","onAbortPatch","onAbortDelete","onAbortFetch","onAbortSearch","onFinishGet","onFinishSelect","onFinishClean","onFinishCreate","onFinishClone","onFinishUpdate","onFinishPatch","onFinishDelete","onFinishFetch","onFinishSearch","onDoneGet","onDoneSelect","onDoneClean","onDoneCreate","onDoneClone","onDoneUpdate","onDonePatch","onDoneDelete","onDoneFetch","onDoneSearch","reduceStartGet","reduceStartSelect","reduceStartClean","reduceStartCreate","reduceStartClone","reduceStartUpdate","reduceStartPatch","reduceStartDelete","reduceStartFetch","reduceStartSearch","reduceErrorGet","reduceErrorSelect","reduceErrorClean","reduceErrorCreate","reduceErrorClone","reduceErrorUpdate","reduceErrorPatch","reduceErrorDelete","reduceErrorFetch","reduceErrorSearch","reduceDoneGet","reduceDoneSelect","reduceDoneClean","reduceDoneCreate","reduceDoneClone","reduceDoneUpdate","reduceDonePatch","reduceDoneDelete","reduceDoneFetch","reduceDoneSearch","reduceAbortGet","reduceAbortSelect","reduceAbortClean","reduceAbortCreate","reduceAbortClone","reduceAbortUpdate","reduceAbortPatch","reduceAbortDelete","reduceAbortFetch","reduceAbortSearch","reduceFinishGet","reduceFinishSelect","reduceFinishClean","reduceFinishCreate","reduceFinishClone","reduceFinishUpdate","reduceFinishPatch","reduceFinishDelete","reduceFinishFetch","reduceFinishSearch","reduceActionDoneSelect","reduceActionDoneGet","reduceActionDoneClean","reduceActionDoneCreate","reduceActionDoneClone","reduceActionDoneUpdate","reduceActionDonePatch","reduceActionDoneDelete","reduceActionDoneFetch","reduceActionDoneSearch","st","auth","accessToken","tokenTimestamp","take","refreshAction","FormGroup","LabelledGroup","htmlFor","UserModal","createRef","Row","Col","withResourceModal","mapPropsToValues","validationSchema","WrappedComponent","getActionName","operation","resetForm","modalId","handleSubmit","objLoading","setSubmitting","setErrors","serverErrors","openData","withFormik","withFormModal","username","email","confirmPassword","Yup","shape","first_name","required","label","min","test","parent","dispatch","configure","keyMap","users","sequences","modalClass","ModalsContext","createContext","openModal","data","level","ModalsProvider","setCloseModal","setState","prevState","setOpenModal","getKeyMap","getHandlers","handlers","newKeyMap","newHandlers","Provider","allowChanges","Consumer","AddButton","handleClick","initialValues","Children","child","cloneElement","title","withModals","Modals","Modal","Home","App","logo","alt","Boolean","window","location","hostname","match","flows","mainReducer","combineReducers","flow","sagasMiddleware","createSagaMiddleware","store","createStore","applyMiddleware","forEach","dsn","SETNRY_DSN","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.e447d844.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.ee7cd8ed.svg\";","import React, { Fragment } from 'react';\r\nimport { connect, getIn } from 'formik';\r\nimport classNames from 'classnames'\r\n\r\nconst ErrorMessage = ({name, skipTouch, formik}) => {\r\n    // No debería hacer getIn porque nuestro servidor devuelve un string\r\n    // como key del path ejemplo codes[0].value[0] y no devuelve\r\n    // la estructura anidada correspondiente con un diccionario con un array \r\n    // adentro etc \r\n    const error = formik.errors? formik.errors[name] : \"\";\r\n    const touch = getIn(formik.touched, name);\r\n    if (error && (touch || skipTouch)) {\r\n        return (\r\n            <Fragment> \r\n                <div className={classNames(\"no-form-control\", { 'is-invalid': error})}> </div>\r\n                <div className=\"invalid-feedback\">{error}</div>\r\n            </Fragment>\r\n        )\r\n    }\r\n    return null\r\n};\r\n\r\nexport default connect(ErrorMessage);","import React, { Fragment, Component } from 'react';\r\nimport { connect, Field, getIn } from 'formik';\r\nimport ErrorMessage from '../ErrorMessage'\r\nimport classNames from 'classnames'\r\nimport {InputGroup, InputGroupAddon} from 'reactstrap';\r\n\r\nclass InputText extends Component {\r\n    renderField = () => {\r\n        const {formik, name, isSubmitting, placeholder, innerRef, password,\r\n             disabled, submitOnChnage, prefix, notErrorMessage, className, ...others} = this.props\r\n        const extraCalassNames = className ? className.split(' '): []\r\n        return <Field  \r\n            type={password?\"password\":\"text\"}\r\n            name={name} \r\n            placeholder={placeholder}\r\n            disabled={disabled || formik.isSubmitting}\r\n            innerRef={innerRef}\r\n            className={classNames(\"form-control\", ...extraCalassNames, { 'is-invalid': getIn(formik.errors, name)})}\r\n            value={getIn(formik.values, name) || \"\"}\r\n            {...others}\r\n        />\r\n    }\r\n\r\n    render() {\r\n        const {name, prefix, notErrorMessage} = this.props\r\n        return (\r\n            <Fragment>\r\n                {prefix ? \r\n                    <InputGroup>\r\n                        {this.renderField()}\r\n                        <InputGroupAddon addonType=\"append\">{prefix}</InputGroupAddon>\r\n                        <ErrorMessage name={name} />\r\n                    </InputGroup>\r\n                    : <Fragment>\r\n                        {this.renderField()}\r\n                        {!notErrorMessage && \r\n                            <ErrorMessage name={name}/>\r\n                        }\r\n                    </Fragment>\r\n                    \r\n                }\r\n            </Fragment>\r\n        )\r\n    }\r\n};\r\n\r\nexport default connect(InputText);","import React from 'react';\r\nimport { ClipLoader } from 'react-spinners';\r\n\r\n\r\nclass FullSpinner extends React.Component {\r\n    render() {\r\n        return (\r\n            <div className='sweet-loading'>\r\n                <ClipLoader\r\n                    sizeUnit={\"px\"}\r\n                    size={60}\r\n                    color={'#FF586B'}\r\n                />\r\n            </div> \r\n        )\r\n    }\r\n}\r\n\r\nexport default FullSpinner;","import React from 'react';\r\nimport { ClipLoader } from 'react-spinners';\r\n\r\n\r\nclass InlineSpinner extends React.Component {\r\n    render() {\r\n        return (\r\n            <ClipLoader sizeUnit={\"px\"} size={this.props.size} color={'#780206'} />\r\n        )\r\n    }\r\n}\r\n\r\nexport default InlineSpinner;","import React, { Component, Fragment } from 'react';\r\nimport { Button, ModalHeader, ModalBody, ModalFooter, Form } from 'reactstrap';\r\nimport FullSpinner from \"../components/FullSpinner\";\r\nimport InlineSpinner from \"../components/InlineSpinner\";\r\nimport { Modal } from 'reactstrap';\r\nimport { withModal } from '../contexts/ModalsContext.jsx'\r\nimport ErrorMessage from '../forms/ErrorMessage';\r\nimport axios from 'axios';\r\n\r\nclass FormModal extends Component {\r\n    componentWillUnmount() {\r\n        clearTimeout(this.timerId);\r\n    }\r\n\r\n\r\n    componentDidUpdate(prevProps) {\r\n      const { submitted, submitting, isModalOpen, closeModal } = this.props;\r\n      if (prevProps.submitting && submitting === false) {\r\n        this.props.onSubmitted()\r\n      }\r\n      if (!prevProps.submitted && submitted === true) {\r\n        closeModal()\r\n      }\r\n      if (!prevProps.isModalOpen && isModalOpen) {\r\n        this.timerId = setTimeout(this.focus, 500);\r\n      }\r\n    }\r\n\r\n    focus = () => {\r\n      const { isModalOpen, firstInput } = this.props;\r\n      if (firstInput && firstInput.current) {\r\n        firstInput.current.focus()\r\n      } else if (isModalOpen){\r\n        this.timerId = setTimeout(this.focus, 500); // (*)\r\n      }\r\n    }\r\n\r\n    onClose = () => {\r\n      this.props.toggleModal()\r\n      this.props.onClose()\r\n    }\r\n\r\n    onSubmit = () => {\r\n      const { onSubmit, children } = this.props\r\n      console.log(this.props, onSubmit)\r\n      axios.post('http://localhost:3001/users', children.values)\r\n      .then(response => {\r\n          console.log('Respuesta', response)\r\n      }).catch(e => {\r\n          console.log(e);\r\n      });\r\n    }\r\n\r\n    render () {\r\n      const {isModalOpen, toggleModal, children, onSubmit, name, loading, modalLevel, dirty} = this.props;\r\n      return (\r\n        <Modal\r\n          size=\"lg\"\r\n          isOpen={isModalOpen}\r\n          toggle={toggleModal}\r\n          fade={false}\r\n          className={modalLevel <= 4 ? `p-${modalLevel}`: \"p-5\"}\r\n          >\r\n            {loading? \r\n              <ModalBody className=\"p-5\"><FullSpinner/></ModalBody>:\r\n              <Fragment>\r\n                <ModalHeader toggle={toggleModal}>{name} \r\n                     \r\n                     <ul className=\"nav list-inline ml-auto float-right\">\r\n                      { dirty && (\r\n                        <li className=\"list-inline-item pl-2 right\"><p className=\"mb-0\"><small><em>({'cambios sin guardar'})</em></small></p></li>\r\n                      )}\r\n                      { this.props.working > 0 && (\r\n                          <li className=\"list-inline-item pl-2\"> <InlineSpinner size={14} /> </li>\r\n                      )}\r\n                    </ul>\r\n                </ModalHeader>\r\n                <ModalBody>\r\n                    <Form onSubmit={this.onSubmit}>\r\n                        {children}\r\n                        <input type=\"submit\" className=\"hidden\"/>\r\n                        <ErrorMessage name=\"non_field_errors\" skipTouch={true} />\r\n                    </Form>\r\n                </ModalBody>\r\n                <ModalFooter>\r\n                    <Button color=\"primary\" type=\"submit\"\r\n                            onClick={this.onSubmit}>{'Guardar'}</Button>{' '}\r\n                    <Button color=\"warning\" className=\"text-white\" onClick={this.onClose}>{'Cancelar'}</Button>\r\n                </ModalFooter>\r\n              </Fragment>\r\n            }\r\n        </Modal>\r\n      );\r\n    }\r\n}\r\n\r\nexport default withModal(FormModal);\r\n","var toStr = Object.prototype.toString;\r\nfunction hasOwnProperty(obj, prop) {\r\n  if(obj == null) {\r\n    return false\r\n  }\r\n  //to handle objects with null prototypes (too edge case?)\r\n  return Object.prototype.hasOwnProperty.call(obj, prop)\r\n}\r\n\r\nfunction isEmpty(value){\r\n  if (!value) {\r\n    return true;\r\n  }\r\n  if (isArray(value) && value.length === 0) {\r\n      return true;\r\n  } else if (typeof value !== 'string') {\r\n      for (var i in value) {\r\n          if (hasOwnProperty(value, i)) {\r\n              return false;\r\n          }\r\n      }\r\n      return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction toString(type){\r\n  return toStr.call(type);\r\n}\r\n\r\nfunction isObject(obj){\r\n  return typeof obj === 'object' && toString(obj) === \"[object Object]\";\r\n}\r\n\r\nvar isArray = Array.isArray || function(obj){\r\n  /*istanbul ignore next:cant test*/\r\n  return toStr.call(obj) === '[object Array]';\r\n}\r\n\r\nfunction isBoolean(obj){\r\n  return typeof obj === 'boolean' || toString(obj) === '[object Boolean]';\r\n}\r\n\r\nfunction getKey(key){\r\n  if (key.startsWith('[') && key.endsWith(']')) {\r\n    const innerKey = key.slice(1,key.length - 1)\r\n    var intKey = parseInt(innerKey);\r\n    if (intKey.toString() === innerKey) {\r\n      return intKey;\r\n    }\r\n  }\r\n  return key;\r\n}\r\n\r\nfunction factory(options) {\r\n  options = options || {}\r\n\r\n  var objectPath = function(obj) {\r\n    return Object.keys(objectPath).reduce(function(proxy, prop) {\r\n      if(prop === 'create') {\r\n        return proxy;\r\n      }\r\n\r\n      /*istanbul ignore else*/\r\n      if (typeof objectPath[prop] === 'function') {\r\n        proxy[prop] = objectPath[prop].bind(objectPath, obj);\r\n      }\r\n\r\n      return proxy;\r\n    }, {});\r\n  };\r\n\r\n  function hasShallowProperty(obj, prop) {\r\n    return (options.includeInheritedProps || (typeof prop === 'number' && Array.isArray(obj)) || hasOwnProperty(obj, prop))\r\n  }\r\n\r\n  function getShallowProperty(obj, prop) {\r\n    if (hasShallowProperty(obj, prop)) {\r\n      return obj[prop];\r\n    }\r\n  }\r\n\r\n  function set(obj, path, value, doNotReplace){\r\n    if (typeof path === 'number') {\r\n      path = [path];\r\n    }\r\n    if (!path || path.length === 0) {\r\n      return obj;\r\n    }\r\n    if (typeof path === 'string') {\r\n      return set(obj, path.split('.').map(getKey), value, doNotReplace);\r\n    }\r\n    var currentPath = path[0];\r\n    var currentValue = getShallowProperty(obj, currentPath);\r\n    if (path.length === 1) {\r\n      if (currentValue === void 0 || !doNotReplace) {\r\n        obj[currentPath] = value;\r\n      }\r\n      return currentValue;\r\n    }\r\n\r\n    if (currentValue === void 0) {\r\n      //check if we assume an array\r\n      if(typeof path[1] === 'number') {\r\n        obj[currentPath] = [];\r\n      } else {\r\n        obj[currentPath] = {};\r\n      }\r\n    }\r\n\r\n    return set(obj[currentPath], path.slice(1), value, doNotReplace);\r\n  }\r\n\r\n  objectPath.has = function (obj, path) {\r\n    if (typeof path === 'number') {\r\n      path = [path];\r\n    } else if (typeof path === 'string') {\r\n      path = path.split('.');\r\n    }\r\n\r\n    if (!path || path.length === 0) {\r\n      return !!obj;\r\n    }\r\n\r\n    for (var i = 0; i < path.length; i++) {\r\n      var j = getKey(path[i]);\r\n\r\n      if((typeof j === 'number' && isArray(obj) && j < obj.length) ||\r\n        (options.includeInheritedProps ? (j in Object(obj)) : hasOwnProperty(obj, j))) {\r\n        obj = obj[j];\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  objectPath.ensureExists = function (obj, path, value){\r\n    return set(obj, path, value, true);\r\n  };\r\n\r\n  objectPath.set = function (obj, path, value, doNotReplace){\r\n    return set(obj, path, value, doNotReplace);\r\n  };\r\n\r\n  objectPath.insert = function (obj, path, value, at){\r\n    var arr = objectPath.get(obj, path);\r\n    at = ~~at;\r\n    if (!isArray(arr)) {\r\n      arr = [];\r\n      objectPath.set(obj, path, arr);\r\n    }\r\n    arr.splice(at, 0, value);\r\n  };\r\n\r\n  objectPath.empty = function(obj, path) {\r\n    if (isEmpty(path)) {\r\n      return void 0;\r\n    }\r\n    if (obj == null) {\r\n      return void 0;\r\n    }\r\n\r\n    var value, i;\r\n    if (!(value = objectPath.get(obj, path))) {\r\n      return void 0;\r\n    }\r\n\r\n    if (typeof value === 'string') {\r\n      return objectPath.set(obj, path, '');\r\n    } else if (isBoolean(value)) {\r\n      return objectPath.set(obj, path, false);\r\n    } else if (typeof value === 'number') {\r\n      return objectPath.set(obj, path, 0);\r\n    } else if (isArray(value)) {\r\n      value.length = 0;\r\n    } else if (isObject(value)) {\r\n      for (i in value) {\r\n        if (hasShallowProperty(value, i)) {\r\n          delete value[i];\r\n        }\r\n      }\r\n    } else {\r\n      return objectPath.set(obj, path, null);\r\n    }\r\n  };\r\n\r\n  objectPath.push = function (obj, path /*, values */){\r\n    var arr = objectPath.get(obj, path);\r\n    if (!isArray(arr)) {\r\n      arr = [];\r\n      objectPath.set(obj, path, arr);\r\n    }\r\n\r\n    arr.push.apply(arr, Array.prototype.slice.call(arguments, 2));\r\n  };\r\n\r\n  objectPath.coalesce = function (obj, paths, defaultValue) {\r\n    var value;\r\n\r\n    for (var i = 0, len = paths.length; i < len; i++) {\r\n      if ((value = objectPath.get(obj, paths[i])) !== void 0) {\r\n        return value;\r\n      }\r\n    }\r\n\r\n    return defaultValue;\r\n  };\r\n\r\n  objectPath.get = function (obj, path, defaultValue){\r\n    if (typeof path === 'number') {\r\n      path = [path];\r\n    }\r\n    if (!path || path.length === 0) {\r\n      return obj;\r\n    }\r\n    if (obj == null) {\r\n      return defaultValue;\r\n    }\r\n    if (typeof path === 'string') {\r\n      return objectPath.get(obj, path.split('.'), defaultValue);\r\n    }\r\n\r\n    var currentPath = getKey(path[0]);\r\n    var nextObj = getShallowProperty(obj, currentPath)\r\n    if (nextObj === void 0) {\r\n      return defaultValue;\r\n    }\r\n\r\n    if (path.length === 1) {\r\n      return nextObj;\r\n    }\r\n\r\n    return objectPath.get(obj[currentPath], path.slice(1), defaultValue);\r\n  };\r\n\r\n  objectPath.del = function del(obj, path) {\r\n    if (typeof path === 'number') {\r\n      path = [path];\r\n    }\r\n\r\n    if (obj == null) {\r\n      return obj;\r\n    }\r\n\r\n    if (isEmpty(path)) {\r\n      return obj;\r\n    }\r\n    if(typeof path === 'string') {\r\n      return objectPath.del(obj, path.split('.'));\r\n    }\r\n\r\n    var currentPath = getKey(path[0]);\r\n    if (!hasShallowProperty(obj, currentPath)) {\r\n      return obj;\r\n    }\r\n\r\n    if(path.length === 1) {\r\n      if (isArray(obj)) {\r\n        obj.splice(currentPath, 1);\r\n      } else {\r\n        delete obj[currentPath];\r\n      }\r\n    } else {\r\n      return objectPath.del(obj[currentPath], path.slice(1));\r\n    }\r\n\r\n    return obj;\r\n  }\r\n\r\n  return objectPath;\r\n}\r\n\r\nvar mod = factory();\r\nmod.create = factory;\r\nmod.withInheritedProps = factory({includeInheritedProps: true})\r\nexport default mod\r\n","export const GET = 'GET'\r\nexport const CLEAN = 'CLEAN'\r\nexport const CREATE = 'CREATE'\r\nexport const CLONE = 'CLONE'\r\nexport const UPDATE = 'UPDATE'\r\nexport const PATCH = 'PATCH'\r\nexport const DELETE = 'DELETE'\r\nexport const FETCH = 'FETCH'\r\nexport const SEARCH = 'SEARCH'\r\nexport const FILTER = 'FILTER'\r\nexport const SELECT = 'SELECT'\r\n\r\nexport function requestResource(resource, id, path, defaultObj) {\r\n    return {\r\n        type: GET,\r\n        action: GET,\r\n        resource,\r\n        id,\r\n        path,\r\n        defaultObj,\r\n    }\r\n}\r\n\r\nexport function selectResource(resource, id, path, defaultObj) {\r\n    return {\r\n        type: SELECT,\r\n        action: SELECT,\r\n        resource,\r\n        id,\r\n        path,\r\n        defaultObj,\r\n    }\r\n}\r\n\r\nexport function cleanResource(resource, path) {\r\n    return {\r\n        type: CLEAN,\r\n        action: CLEAN,\r\n        resource,\r\n        path,\r\n    }\r\n}\r\n\r\nexport function createResource(resource, body, path) {\r\n    console.log(resource, body, path)\r\n    return {\r\n        type: CREATE,\r\n        action: CREATE,\r\n        resource,\r\n        body,\r\n        path,\r\n    }\r\n}\r\n\r\nexport function cloneResource(resource, body, id) {\r\n    return {\r\n        type: CLONE,\r\n        action: CLONE,\r\n        resource,\r\n        body,\r\n        id,\r\n    }\r\n}\r\n\r\nexport function updateResource(resource, id, body) {\r\n    return {\r\n        type: UPDATE,\r\n        action: UPDATE,\r\n        resource,\r\n        id,\r\n        body\r\n    }\r\n}\r\n\r\nexport function patchResource(resource, id, body) {\r\n    return {\r\n        type: PATCH,\r\n        action: PATCH,\r\n        resource,\r\n        id,\r\n        body\r\n    }\r\n}\r\n\r\nexport function deleteResource(resource, id) {\r\n    return {\r\n        type: DELETE,\r\n        action: DELETE,\r\n        resource,\r\n        id,\r\n    }\r\n}\r\n\r\nexport function searchResources(resource, id, q, offset, limit, order, tempFilters={}) {\r\n    return {\r\n        type: SEARCH,\r\n        action: SEARCH,\r\n        resource,\r\n        id,\r\n        q,\r\n        offset,\r\n        limit,\r\n        order,\r\n        tempFilters\r\n    }\r\n}\r\n\r\nexport function fetchResources(resource, tempFilters={}) {\r\n    return {\r\n        type: FETCH,\r\n        action: FETCH,\r\n        resource,\r\n        tempFilters\r\n    }\r\n}\r\n\r\nexport function updateFilters(resource, id, newFilters) {\r\n    return {\r\n        type: FILTER,\r\n        action: FILTER,\r\n        resource,\r\n        id,\r\n        newFilters,\r\n    }\r\n}\r\n","export function ValidationException(errors) {\r\n   this.errors = errors;\r\n   this.name = 'ValidationException';\r\n}\r\n\r\nexport function UnknownException(description) {\r\n    this.description = description;\r\n    this.name = \"UnknownException\";\r\n}\r\n\r\nexport function AuthorizationException(description) {\r\n    this.description = description;\r\n    this.name = \"AuthorizationException\"\r\n}","// import dev from './settings/dev'\r\n// import prod from './settings/prod'\r\n\r\nconst dev = {\r\n    API_URL: process.env.REACT_APP_API_URL,\r\n    SENTRY_DSN: \"\"\r\n}\r\n\r\n//const settings = Object.assign({}, dev, (process.env.NODE_ENV === 'production' || !__DEV__)?prod:dev)\r\nconst settings = Object.assign({}, dev)\r\n\r\nexport default settings\r\n","\r\nimport { ValidationException, UnknownException, AuthorizationException \r\n       } from '../exceptions'\r\nimport settings from '../settings'\r\n\r\nconst getTokenHeaders = (token) => {\r\n    return {\r\n        \"Authorization\": \"Bearer \" + token\r\n    }\r\n}\r\n\r\nconst fetchMain = async (url, method, status, extraHeaders={}, body={},  params={} ) => {\r\n    let hasFile = body.attributes && body.attributes.some(a => a.attr.slug === \"archivo\")\r\n    if (!hasFile) {\r\n        extraHeaders = Object.assign({}, extraHeaders, {\r\n            \"Content-Type\": \"application/json\",\r\n        })\r\n    }\r\n    const config = {\r\n        method: method,\r\n        headers: Object.assign({\"Accept\": \"application/json\"}, extraHeaders),\r\n    }\r\n    if (body && Object.keys(body).length > 0) {\r\n        config.body = JSON.stringify(body)\r\n    }\r\n    if (params && Object.keys(params).length > 0) {\r\n        url = url + \"?\" + Object.keys(params).filter(k=> params[k]).map(\r\n                k => encodeURIComponent(k) + '=' + encodeURIComponent(params[k]) \r\n            ).join('&');\r\n    }\r\n    const response = await fetch(url, config)\r\n    let results = await response.text();\r\n    try {\r\n         results = JSON.parse(results)\r\n    } catch (error) { }\r\n    if (response.status === 500) {\r\n        throw new UnknownException(results)\r\n    } else if (response.status === 400) {\r\n        throw new ValidationException(results)\r\n    } else if (response.status === 401) {\r\n        throw new AuthorizationException(results)\r\n    } else if (response.status !== status) {\r\n        throw response\r\n    }\r\n    return results\r\n}\r\n\r\n\r\nexport const authUser = async (email, password) => {\r\n    return fetchMain(\r\n        settings.API_URL  + \"/auth/token/\",\r\n        'POST',\r\n        200, {}, {\r\n            email,\r\n            password\r\n        }\r\n    )\r\n}\r\n\r\nexport const refreshToken = async (token) => {\r\n    return fetchMain(\r\n        settings.API_URL + \"/auth/refresh/\",\r\n        'POST',\r\n        200, {}, {\r\n            refresh: token\r\n        }\r\n\r\n    )\r\n}\r\n\r\nexport const getResource = async (token, resource, id ) => {\r\n    return fetchMain(\r\n        settings.API_URL + `/api/${resource}/${id}/`,\r\n        'GET',\r\n        200,\r\n        getTokenHeaders(token)\r\n    )\r\n}\r\n\r\nexport const getMe = async (token) => {\r\n    return fetchMain(\r\n        settings.API_URL + `/api/me/`,\r\n        'GET',\r\n        200,\r\n        getTokenHeaders(token)\r\n    )\r\n}\r\n\r\nexport const fetchResources = async (token, resource, filters ) => {\r\n    return fetchMain(\r\n        settings.API_URL + `/api/${resource}/`,\r\n        'GET',\r\n        200,\r\n        getTokenHeaders(token),\r\n        {},\r\n        filters\r\n    )\r\n}\r\n\r\nexport const createResource = async (token, resource, body) => {\r\n    return fetchMain(\r\n        settings.API_URL + `/api/${resource}/`,\r\n        'POST',\r\n        201,\r\n        getTokenHeaders(token),\r\n        body\r\n    )\r\n}\r\n\r\nexport const updateResource = async (token, resource, id, body) => {\r\n    return fetchMain(\r\n        settings.API_URL + `/api/${resource}/${id}/`,\r\n        'PUT',\r\n        200,\r\n        getTokenHeaders(token),\r\n        body\r\n    )\r\n}\r\n\r\nexport const patchResource = async (token, resource, id, body) => {\r\n    return fetchMain(\r\n        settings.API_URL + `/api/${resource}/${id}/`,\r\n        'PATCH',\r\n        200,\r\n        getTokenHeaders(token),\r\n        body\r\n    )\r\n}\r\n\r\nexport const deleteResource = async (token, resource, id) => {\r\n    return fetchMain(\r\n        settings.API_URL + `/api/${resource}/${id}/`,\r\n        'DELETE',\r\n        204,\r\n        getTokenHeaders(token)\r\n    )\r\n}\r\n","import isPlainObject from 'is-plain-object'\r\n\r\nvar _hasOwnProperty = Object.prototype.hasOwnProperty\r\n\r\nfunction isEmpty (value) {\r\n  if (isNumber(value)) {\r\n    return false\r\n  }\r\n  if (!value) {\r\n    return true\r\n  }\r\n  if (isArray(value) && value.length === 0) {\r\n    return true\r\n  } else if (!isString(value)) {\r\n    for (var i in value) {\r\n      if (_hasOwnProperty.call(value, i)) {\r\n        return false\r\n      }\r\n    }\r\n    return true\r\n  }\r\n  return false\r\n}\r\n\r\n\r\nfunction isNumber (value) {\r\n  return typeof value === 'number'\r\n}\r\n\r\nfunction isString (obj) {\r\n  return typeof obj === 'string'\r\n}\r\n\r\nfunction isArray (obj) {\r\n  return Array.isArray(obj)\r\n}\r\n\r\nfunction assignToObj (target, source) {\r\n  for (var key in source) {\r\n    if (_hasOwnProperty.call(source, key)) {\r\n      target[key] = source[key]\r\n    }\r\n  }\r\n  return target\r\n}\r\n\r\nfunction getKey (key) {\r\n  if (key.startsWith('[') && key.endsWith(']')) {\r\n      const innerKey = key.slice(1,key.length - 1)\r\n      var intKey = parseInt(innerKey);\r\n      if (intKey.toString() === innerKey) {\r\n        return intKey;\r\n      }\r\n    }\r\n    return key;\r\n}\r\n\r\nvar objectPathImmutable = function (src) {\r\n  var dest = src\r\n  var committed = false\r\n\r\n  var transaction = Object.keys(api).reduce(function (proxy, prop) {\r\n    /* istanbul ignore else */\r\n    if (typeof api[prop] === 'function') {\r\n      proxy[prop] = function () {\r\n        var args = [dest, src].concat(Array.prototype.slice.call(arguments))\r\n\r\n        if (committed) {\r\n          throw new Error('Cannot call ' + prop + ' after `value`')\r\n        }\r\n\r\n        dest = api[prop].apply(null, args)\r\n\r\n        return transaction\r\n      }\r\n    }\r\n\r\n    return proxy\r\n  }, {})\r\n\r\n  transaction.value = function () {\r\n    committed = true\r\n    return dest\r\n  }\r\n\r\n  return transaction\r\n}\r\n\r\nfunction clone (obj, createIfEmpty, assumeArray) {\r\n  if (obj == null) {\r\n    if (createIfEmpty) {\r\n      if (assumeArray) {\r\n        return []\r\n      }\r\n\r\n      return {}\r\n    }\r\n\r\n    return obj\r\n  } else if (isArray(obj)) {\r\n    return obj.slice()\r\n  }\r\n\r\n  return assignToObj({}, obj)\r\n}\r\n\r\nfunction deepMerge (dest, src) {\r\n  if (dest !== src && isPlainObject(dest) && isPlainObject(src)) {\r\n    var merged = {}\r\n    for (var key in dest) {\r\n      if (dest.hasOwnProperty(key)) {\r\n        if (src.hasOwnProperty(key)) {\r\n          merged[key] = deepMerge(dest[key], src[key])\r\n        } else {\r\n          merged[key] = dest[key]\r\n        }\r\n      }\r\n    }\r\n\r\n    for (key in src) {\r\n      if (src.hasOwnProperty(key)) {\r\n        merged[key] = deepMerge(dest[key], src[key])\r\n      }\r\n    }\r\n    return merged\r\n  }\r\n  return src\r\n}\r\n\r\nfunction changeImmutable (dest, src, path, changeCallback) {\r\n  if (isNumber(path)) {\r\n    path = [path]\r\n  }\r\n  if (isEmpty(path)) {\r\n    return src\r\n  }\r\n  if (isString(path)) {\r\n    return changeImmutable(dest, src, path.split('.').map(getKey), changeCallback)\r\n  }\r\n  var currentPath = path[0]\r\n\r\n  if (!dest || dest === src) {\r\n    dest = clone(src, true, isNumber(currentPath))\r\n  }\r\n\r\n  if (path.length === 1) {\r\n    return changeCallback(dest, currentPath)\r\n  }\r\n\r\n  if (src != null) {\r\n    src = src[currentPath]\r\n  }\r\n\r\n  dest[currentPath] = changeImmutable(dest[currentPath], src, path.slice(1), changeCallback)\r\n\r\n  return dest\r\n}\r\n\r\nvar api = {}\r\napi.set = function set (dest, src, path, value) {\r\n  if (isEmpty(path)) {\r\n    return value\r\n  }\r\n  return changeImmutable(dest, src, path, function (clonedObj, finalPath) {\r\n    clonedObj[finalPath] = value\r\n    return clonedObj\r\n  })\r\n}\r\n\r\napi.update = function update (dest, src, path, updater) {\r\n  if (isEmpty(path)) {\r\n    return updater(clone(src))\r\n  }\r\n  return changeImmutable(dest, src, path, function (clonedObj, finalPath) {\r\n    clonedObj[finalPath] = updater(clonedObj[finalPath])\r\n    return clonedObj\r\n  })\r\n}\r\n\r\napi.push = function push (dest, src, path /*, values */) {\r\n  var values = Array.prototype.slice.call(arguments, 3)\r\n  if (isEmpty(path)) {\r\n    if (!isArray(src)) {\r\n      return values\r\n    } else {\r\n      return src.concat(values)\r\n    }\r\n  }\r\n  return changeImmutable(dest, src, path, function (clonedObj, finalPath) {\r\n    if (!isArray(clonedObj[finalPath])) {\r\n      clonedObj[finalPath] = values\r\n    } else {\r\n      clonedObj[finalPath] = clonedObj[finalPath].concat(values)\r\n    }\r\n    return clonedObj\r\n  })\r\n}\r\n\r\napi.insert = function insert (dest, src, path, value, at) {\r\n  at = ~~at\r\n  if (isEmpty(path)) {\r\n    if (!isArray(src)) {\r\n      return [value]\r\n    }\r\n\r\n    var first = src.slice(0, at)\r\n    first.push(value)\r\n    return first.concat(src.slice(at))\r\n  }\r\n  return changeImmutable(dest, src, path, function (clonedObj, finalPath) {\r\n    var arr = clonedObj[finalPath]\r\n    if (!isArray(arr)) {\r\n      if (arr != null && typeof arr !== 'undefined') {\r\n        throw new Error('Expected ' + path + 'to be an array. Instead got ' + typeof path)\r\n      }\r\n      arr = []\r\n    }\r\n\r\n    var first = arr.slice(0, at)\r\n    first.push(value)\r\n    clonedObj[finalPath] = first.concat(arr.slice(at))\r\n    return clonedObj\r\n  })\r\n}\r\n\r\napi.del = function del (dest, src, path) {\r\n  if (isEmpty(path)) {\r\n    return void 0\r\n  }\r\n  return changeImmutable(dest, src, path, function (clonedObj, finalPath) {\r\n    if (Array.isArray(clonedObj)) {\r\n      if (clonedObj[finalPath] !== undefined) {\r\n        clonedObj.splice(finalPath, 1)\r\n      }\r\n    } else {\r\n      if (clonedObj.hasOwnProperty(finalPath)) {\r\n        delete clonedObj[finalPath]\r\n      }\r\n    }\r\n    return clonedObj\r\n  })\r\n}\r\n\r\napi.assign = function assign (dest, src, path, source) {\r\n  if (isEmpty(path)) {\r\n    if (isEmpty(source)) {\r\n      return src\r\n    }\r\n    return assignToObj(clone(src), source)\r\n  }\r\n  return changeImmutable(dest, src, path, function (clonedObj, finalPath) {\r\n    source = Object(source)\r\n    var target = clone(clonedObj[finalPath], true)\r\n    assignToObj(target, source)\r\n\r\n    clonedObj[finalPath] = target\r\n    return clonedObj\r\n  })\r\n}\r\n\r\napi.merge = function assign (dest, src, path, source) {\r\n  if (isEmpty(path)) {\r\n    if (isEmpty(source)) {\r\n      return src\r\n    }\r\n    return deepMerge(src, source)\r\n  }\r\n  return changeImmutable(dest, src, path, function (clonedObj, finalPath) {\r\n    source = Object(source)\r\n    clonedObj[finalPath] = deepMerge(clonedObj[finalPath], source)\r\n    return clonedObj\r\n  })\r\n}\r\n\r\nconst immutable = Object.keys(api).reduce(function (objectPathImmutable, method) {\r\n  objectPathImmutable[method] = api[method].bind(null, null)\r\n\r\n  return objectPathImmutable\r\n}, objectPathImmutable)\r\n\r\nexport default immutable","import { put, call, takeEvery, cancelled, \r\n         all, select, takeLatest }  from 'redux-saga/effects'\r\nimport * as Sentry from '@sentry/browser';\r\nimport moment from 'moment'\r\n\r\nimport { UnknownException } from '../../exceptions'\r\nimport immutable from '../../libs/object-path-immutable'\r\nimport objectPath from '../../libs/object-path'\r\n\r\nexport function getActionStepType(action, step) {\r\n    return `${action.toUpperCase()}_${step.toUpperCase()}`\r\n}\r\n\r\nexport const ACTION_DONE = 'DONE';\r\nexport const ACTION_ERROR = 'ERROR';\r\nexport const ACTION_ABORT = 'ABORT';\r\nexport const ACTION_FINISH = 'FINISH';\r\n\r\n/*\r\nFlow es una clase que facilita el trabajo de correr n acciones que operan todas \r\njuntas en un mismo path del estado.\r\n\r\n### Acciones\r\nEn flow se manejan dos tipos de acciones como concepto. \r\n\r\nPúblicas: Las acciones públicas que se escriben generalmente en un archivo \r\nactions.js que son las acciones que se van a llamar de diferenes partes del \r\nproyecto\r\nPrivadas: Acciones que son llamadas por otras acciones y que nunca se van a \r\nutilizar afuera de los Flow. Para etsas acciones no hay definiciones explicitas\r\n\r\nEsta diferencia conceptual ayuda de gran manera a no llenar el código de \r\nboilerplate\r\n\r\n### Paths\r\n\r\nEn flow hay dos paths a tener en cuenta. \r\n\r\nPath Root: Es el path donde este flow corre y por ende sería imposible \r\nmodificar cualquier parte del estado qie este por arriba del path root.\r\nActtion Path: Es el path donde se va a ir actualizando el estado de la acción\r\nmientras corre. Cada acción debe configurar su path de accion.\r\n\r\nLa clase Flow se maneja en su totailidad seteando la variable actions, la cual\r\npermite definir los métodos que se corren en cada situación \r\n\r\n - **actionPath**: un string o un método que recibe (*action*, *state*)\r\n - **run**: un método que recibe (*action*, *state*)\r\n - **onError**: un método que recibe (*action*, *state*)\r\n - **onAbort**: un método que recibe (*action*, *state*)\r\n - **onFinish**: un método que recibe (*action*, *state*)\r\n - **onDone**: un método que recibe (*action*, *state*)\r\n - **reduceStart**: un método que recibe (*state*, *state*)\r\n - **reduceError**: un método que recibe (*state*, *state*)\r\n - **reduceDone**: un método que recibe (*state*, *state*)\r\n - **reduceAbort**: un método que recibe (*state*, *state*)\r\n - **reduceFinish**: un método que recibe (*state*, *state*)\r\n\r\nconstructor(rootPath) {\r\n    super(rootPath)\r\n    actions = {\r\n        ACTION_KEY: {\r\n            actionPath,\r\n            run,        // debe  \r\n            onError,\r\n            onAbort,\r\n            onFinish,\r\n            onDone,\r\n            reduceStart,\r\n            reduceError,\r\n            reduceDone,\r\n            reduceAbort,\r\n            reduceFinish\r\n        },\r\n    }\r\n}\r\n\r\nHay una variable de clase que se usa para inicializar el path en caso de que el\r\nestado sea undefined `initialState`\r\n\r\nSe pueden sobreescribir los siguientes métodos para cambiar su funcionamiento\r\n\r\n*isFlowAction*: Recibe una acción y determina si la acción corresponde al Flow\r\n*resolvePattern*: Recibe un step *undefined*, *ACTION_ERROR*, *ACTION_DONE*, \r\n   *ACTION_ABORT*, *ACTION_FINISH* y tiene que devolver un método que recibiendo\r\n   una accion determina si hay que correr la saga para ese step o no. Se usa\r\n   para el takeEvery de sagas\r\n*runAction*: El método que se usa para correr lo que sea que haga casa acción\r\n   hoy en día simplemente llama al método. \r\n\r\n\r\n*/\r\nexport default class Flow {\r\n\r\n    actionInitialState = {\r\n        error: undefined,\r\n        working: 0,\r\n        done: false,\r\n        abort: false,\r\n        requested: undefined,\r\n        failed: undefined,\r\n        completed: undefined,\r\n        aborted: undefined,\r\n    }\r\n    actions = {}\r\n    initialState = {}\r\n    rootPath = \"\"\r\n\r\n    constructor(rootPath) {\r\n        this.rootPath = rootPath\r\n        this.isFlowAction = this.isFlowAction.bind(this);\r\n        this.resolvePattern = this.resolvePattern.bind(this);\r\n        this.resolvePatternLatest = this.resolvePatternLatest.bind(this);\r\n        this.stepAction = this.stepAction.bind(this)\r\n        this.onStart = this.onStart.bind(this);\r\n        this.onError = this.onError.bind(this);\r\n        this.onDone = this.onDone.bind(this);\r\n        this.onAbort = this.onAbort.bind(this);\r\n        this.onFinish = this.onFinish.bind(this);\r\n        this.reduceStart = this.reduceStart.bind(this);\r\n        this.reduceError = this.reduceError.bind(this);\r\n        this.reduceDone = this.reduceDone.bind(this);\r\n        this.reduceAbort = this.reduceAbort.bind(this);\r\n        this.reduceFinish = this.reduceFinish.bind(this);\r\n        this.reduceActionDone = this.reduceActionDone.bind(this);\r\n        this.reduceAction = this.reduceAction.bind(this);\r\n        this.reducer = this.reducer.bind(this);\r\n        this.sagas = this.sagas.bind(this);\r\n        this.saga = this.saga.bind(this);\r\n        this.runAction = this.runAction.bind(this);\r\n    }\r\n\r\n    isFlowAction(action) {\r\n        return Object.keys(this.actions).indexOf(action.action) >= 0\r\n    }\r\n\r\n    resolvePattern(step=undefined) {\r\n        let answer = function (action) {\r\n            return this.rootPath && this.isFlowAction(action) && step === action.step\r\n        }\r\n        return answer.bind(this)\r\n    }\r\n\r\n    resolvePatternLatest(step=undefined) {\r\n        let answer = function (action) {\r\n            return false \r\n        }\r\n        return answer.bind(this)\r\n    }\r\n\r\n    stepAction(action, step, extra = {}){\r\n        return Object.assign({}, action, extra,\r\n            {\r\n                type: getActionStepType(action.action, step),\r\n                step: step,\r\n            }\r\n        )\r\n    }\r\n\r\n    * onError(action) {\r\n        try {\r\n            const actionInfo = this.actions[action.action]\r\n            const flowState = yield select((state) => objectPath.get(state, this.rootPath ))\r\n            if (actionInfo && actionInfo.onError) {\r\n                yield call([this, actionInfo.onError], action, flowState)\r\n            }\r\n        } catch (error) {\r\n            Sentry.captureException(error);\r\n        }\r\n    }\r\n    * onDone(action) {\r\n        try {\r\n            const actionInfo = this.actions[action.action]\r\n            const flowState = yield select((state) => objectPath.get(state, this.rootPath ))\r\n            if (actionInfo && actionInfo.onDone) {\r\n                yield call([this, actionInfo.onDone], action, flowState)\r\n            }\r\n        } catch (error) {\r\n            Sentry.captureException(error);\r\n        }\r\n    }\r\n    * onAbort(action) {\r\n        try {\r\n            const actionInfo = this.actions[action.action]\r\n            const flowState = yield select((state) => objectPath.get(state, this.rootPath ))\r\n            if (actionInfo && actionInfo.onAbort) {\r\n                yield call([this, actionInfo.onAbort], action, flowState)\r\n            }\r\n        } catch (error) {\r\n            Sentry.captureException(error);\r\n        }\r\n    }\r\n    * onFinish(action) {\r\n        try {\r\n            const actionInfo = this.actions[action.action]\r\n            const flowState = yield select((state) => objectPath.get(state, this.rootPath ))\r\n            if (actionInfo && actionInfo.onFinish) {\r\n                yield call([this, actionInfo.onFinish], action, flowState)\r\n            }\r\n        } catch (error) {\r\n            Sentry.captureException(error);\r\n        }\r\n    }\r\n\r\n    * runAction(action, info, state) {\r\n        const results = yield info.run(action, state)\r\n        return results\r\n    }\r\n\r\n    * onStart(action) {\r\n        let results = undefined\r\n        let error = undefined\r\n        const actionInfo = this.actions[action.action]\r\n        if (actionInfo && actionInfo.run) {\r\n            const flowState = yield select((state) => objectPath.get(state, this.rootPath ))\r\n            try {\r\n                results = yield call(this.runAction, action, actionInfo, flowState)\r\n                if (results === undefined) {\r\n                    yield put(this.stepAction(action, ACTION_ABORT))\r\n                } else {\r\n                    yield put(this.stepAction(action, ACTION_DONE, { results }))\r\n                }\r\n            } catch (raiseError) {\r\n                error = raiseError\r\n                if (error instanceof UnknownException) {\r\n                    Sentry.captureException(error);\r\n                }\r\n                yield put(this.stepAction(action, ACTION_ERROR, { error }))\r\n            } finally {\r\n                let wasCancelled = yield cancelled()\r\n                if (wasCancelled) {\r\n                    yield put(this.stepAction(action, ACTION_ABORT))\r\n                }\r\n                yield put(this.stepAction(action, ACTION_FINISH, { results, error }))\r\n            }\r\n        }\r\n    }\r\n    \r\n    reduceStart(state, action, info) { \r\n        if (info.reduceStart) {\r\n            return info.reduceStart(state, action)\r\n        }\r\n        return state \r\n    }\r\n\r\n    reduceError(state, action, info) { \r\n        if (info.reduceError) {\r\n            return info.reduceError(state, action)\r\n        }\r\n        return state \r\n    }\r\n\r\n    reduceDone(state, action, info) { \r\n        if (info.reduceDone) {\r\n            return info.reduceDone(state, action)\r\n        }\r\n        return state \r\n    }\r\n\r\n    reduceAbort(state, action, info) { \r\n        if (info.reduceAbort) {\r\n            return info.reduceAbort(state, action)\r\n        }\r\n        return state \r\n    }\r\n\r\n    reduceFinish(state, action, info) { \r\n        if (info.reduceFinish) {\r\n            return info.reduceFinish(state, action)\r\n        }\r\n        return state \r\n    }\r\n\r\n    reduceActionDone(state, action, info) {\r\n        if (info.reduceActionDone) {\r\n            return info.reduceActionDone(state, action)\r\n        }\r\n        return state\r\n    }\r\n\r\n\r\n    reduceAction(state, action) {\r\n        if (state === undefined) {\r\n            state = this.actionInitialState\r\n        }\r\n        if (action.loop === this.slug) {\r\n            const actionInfo = this.actions[action.action]\r\n            switch (action.step) {\r\n                case undefined:\r\n                    return Object.assign({}, state,\r\n                        {\r\n                            working: state.working + 1,\r\n                            requested: moment().valueOf(),\r\n                            done: false,\r\n                            error: undefined,\r\n                            abort: false,\r\n                        }\r\n                    )\r\n                case ACTION_ERROR:\r\n                    return Object.assign({}, state,\r\n                        {\r\n                            error: action.error,\r\n                            failed: moment().valueOf(),\r\n                            done: false,\r\n                            abort: false,\r\n                        }\r\n                    )\r\n                case ACTION_DONE:\r\n                    return Object.assign({},\r\n                        this.reduceActionDone(state, action, actionInfo),\r\n                        {\r\n                            error: undefined,\r\n                            completed: moment().valueOf(),\r\n                            done: true,\r\n                            abort: false\r\n                        }\r\n                    )\r\n                case ACTION_ABORT:\r\n                    return Object.assign({}, state,\r\n                        {\r\n                            error: undefined,\r\n                            done: false,\r\n                            abort: true,\r\n                            aborted: moment().valueOf()\r\n                        }\r\n                    )\r\n                case ACTION_FINISH:\r\n                    return Object.assign({}, state,\r\n                        {\r\n                            working: state.working - 1,\r\n                        }\r\n                    )\r\n                default:\r\n                    break\r\n            }\r\n        }\r\n        return state\r\n    }\r\n\r\n    reducer(state, action) {\r\n        if (this.isFlowAction(action) && this.actions[action.action]) {\r\n            const actionInfo = this.actions[action.action]\r\n            if (state === undefined || Object.keys(state).length === 0) {\r\n                state = this.initialState || {}\r\n            }\r\n            let newState = undefined\r\n            switch(action.step){\r\n                case undefined:\r\n                    newState = this.reduceStart(state, action, actionInfo)\r\n                    break;\r\n                case ACTION_ERROR:\r\n                    newState = this.reduceError(state, action, actionInfo)\r\n                    break;\r\n                case ACTION_DONE:\r\n                    newState = this.reduceDone(state, action, actionInfo)\r\n                    break;\r\n                case ACTION_ABORT:\r\n                    newState = this.reduceAbort(state, action, actionInfo)\r\n                    break;\r\n                case ACTION_FINISH:\r\n                    newState = this.reduceFinish(state, action, actionInfo)\r\n                    break;\r\n                default:\r\n                    newState = state\r\n\r\n            }\r\n            const path = typeof actionInfo.actionPath === 'string'?actionInfo.actionPath:actionInfo.actionPath(action, state)\r\n            return immutable.merge(newState, path, this.reduceAction(objectPath.get(state, path), action) )\r\n        } \r\n        return state || {}\r\n    }\r\n\r\n    sagas() {\r\n        return []\r\n    }\r\n\r\n    * saga() {\r\n        yield all([\r\n            takeLatest(this.resolvePatternLatest(), this.onStart),\r\n            takeEvery(this.resolvePattern(), this.onStart),\r\n            takeEvery(this.resolvePattern(ACTION_ERROR), this.onError),\r\n            takeEvery(this.resolvePattern(ACTION_DONE), this.onDone),\r\n            takeEvery(this.resolvePattern(ACTION_ABORT), this.onAbort),\r\n            takeEvery(this.resolvePattern(ACTION_FINISH), this.onFinish),\r\n            ...this.sagas(),\r\n        ])\r\n    }\r\n}","import moment from 'moment'\r\nimport { take, select, put } from 'redux-saga/effects'\r\nimport * as api from '../../apis/main'\r\nimport immutable from '../../libs/object-path-immutable'\r\nimport { requestRefreshToken, REFRESH_TOKEN } from '../AuthFlow'\r\nimport objectPath from '../../libs/object-path'\r\nimport { getActionStepType, ACTION_FINISH, Flow } from '../Flow'\r\nimport { ValidationException } from '../../exceptions'\r\nimport { GET, CLEAN, CREATE, CLONE, UPDATE, PATCH, DELETE, FETCH, SEARCH, SELECT } from './actions'\r\n\r\nexport default class ResourceFlow extends Flow {\r\n    useParser = false\r\n\r\n    constructor(rootPath, resource) {\r\n        super(rootPath)\r\n        this.resource = resource\r\n        this.actions = {\r\n            [GET]: {\r\n                actionPath: this.actionPathGet,\r\n                run: this.runGet,\r\n                onError: this.onErrorGet,\r\n                onAbort: this.onAbortGet,\r\n                onFinish: this.onFinishGet,\r\n                onDone: this.onDoneGet,\r\n                reduceStart: this.reduceStartGet,\r\n                reduceError: this.reduceErrorGet,\r\n                reduceDone: this.reduceDoneGet,\r\n                reduceAbort: this.reduceAbortGet,\r\n                reduceFinish: this.reduceFinishGet,\r\n                reduceActionDone: this.reduceActionDoneGet,\r\n            },\r\n            [SELECT]: {\r\n                actionPath: this.actionPathSelect,\r\n                run: this.runSelect,\r\n                onError: this.onErrorSelect,\r\n                onAbort: this.onAbortSelect,\r\n                onFinish: this.onFinishSelect,\r\n                onDone: this.onDoneSelect,\r\n                reduceStart: this.reduceStartSelect,\r\n                reduceError: this.reduceErrorSelect,\r\n                reduceDone: this.reduceDoneSelect,\r\n                reduceAbort: this.reduceAbortSelect,\r\n                reduceFinish: this.reduceFinishSelect,\r\n                reduceActionDone: this.reduceActionDoneSelect,\r\n            },\r\n            [CLEAN]: {\r\n                actionPath: this.actionPathClean,\r\n                run: this.runClean,\r\n                onError: this.onErrorClean,\r\n                onAbort: this.onAbortClean,\r\n                onFinish: this.onFinishClean,\r\n                onDone: this.onDoneClean,\r\n                reduceStart: this.reduceStartClean,\r\n                reduceError: this.reduceErrorClean,\r\n                reduceDone: this.reduceDoneClean,\r\n                reduceAbort: this.reduceAbortClean,\r\n                reduceFinish: this.reduceFinishClean,\r\n                reduceActionDone: this.reduceActionDoneClean,\r\n            },\r\n            [CREATE]: {\r\n                actionPath: this.actionPathCreate,\r\n                run: this.runCreate,\r\n                onError: this.onErrorCreate,\r\n                onAbort: this.onAbortCreate,\r\n                onFinish: this.onFinishCreate,\r\n                onDone: this.onDoneCreate,\r\n                reduceStart: this.reduceStartCreate,\r\n                reduceError: this.reduceErrorCreate,\r\n                reduceDone: this.reduceDoneCreate,\r\n                reduceAbort: this.reduceAbortCreate,\r\n                reduceFinish: this.reduceFinishCreate,\r\n                reduceActionDone: this.reduceActionDoneCreate,\r\n            },\r\n            [CLONE]: {\r\n                actionPath: this.actionPathClone,\r\n                run: this.runClone,\r\n                onError: this.onErrorClone,\r\n                onAbort: this.onAbortClone,\r\n                onFinish: this.onFinishClone,\r\n                onDone: this.onDoneClone,\r\n                reduceStart: this.reduceStartClone,\r\n                reduceError: this.reduceErrorClone,\r\n                reduceDone: this.reduceDoneClone,\r\n                reduceAbort: this.reduceAbortClone,\r\n                reduceFinish: this.reduceFinishClone,\r\n                reduceActionDone: this.reduceActionDoneClone,\r\n            },\r\n            [UPDATE]: {\r\n                actionPath: this.actionPathUpdate,\r\n                run: this.runUpdate,\r\n                onError: this.onErrorUpdate,\r\n                onAbort: this.onAbortUpdate,\r\n                onFinish: this.onFinishUpdate,\r\n                onDone: this.onDoneUpdate,\r\n                reduceStart: this.reduceStartUpdate,\r\n                reduceError: this.reduceErrorUpdate,\r\n                reduceDone: this.reduceDoneUpdate,\r\n                reduceAbort: this.reduceAbortUpdate,\r\n                reduceFinish: this.reduceFinishUpdate,\r\n                reduceActionDone: this.reduceActionDoneUpdate,\r\n            },\r\n            [PATCH]: {\r\n                actionPath: this.actionPathPatch,\r\n                run: this.runPatch,\r\n                onError: this.onErrorPatch,\r\n                onAbort: this.onAbortPatch,\r\n                onFinish: this.onFinishPatch,\r\n                onDone: this.onDonePatch,\r\n                reduceStart: this.reduceStartPatch,\r\n                reduceError: this.reduceErrorPatch,\r\n                reduceDone: this.reduceDonePatch,\r\n                reduceAbort: this.reduceAbortPatch,\r\n                reduceFinish: this.reduceFinishPatch,\r\n                reduceActionDone: this.reduceActionDonePatch,\r\n            },\r\n            [DELETE]: {\r\n                actionPath: this.actionPathDelete,\r\n                run: this.runDelete,\r\n                onError: this.onErrorDelete,\r\n                onAbort: this.onAbortDelete,\r\n                onFinish: this.onFinishDelete,\r\n                onDone: this.onDoneDelete,\r\n                reduceStart: this.reduceStartDelete,\r\n                reduceError: this.reduceErrorDelete,\r\n                reduceDone: this.reduceDoneDelete,\r\n                reduceAbort: this.reduceAbortDelete,\r\n                reduceFinish: this.reduceFinishDelete,\r\n                reduceActionDone: this.reduceActionDoneDelete,\r\n            },\r\n            [FETCH]: {\r\n                actionPath: this.actionPathFetch,\r\n                run: this.runFetch,\r\n                onError: this.onErrorFetch,\r\n                onAbort: this.onAbortFetch,\r\n                onFinish: this.onFinishFetch,\r\n                onDone: this.onDoneFetch,\r\n                reduceStart: this.reduceStartFetch,\r\n                reduceError: this.reduceErrorFetch,\r\n                reduceDone: this.reduceDoneFetch,\r\n                reduceAbort: this.reduceAbortFetch,\r\n                reduceFinish: this.reduceFinishFetch,\r\n                reduceActionDone: this.reduceActionDoneFetch,\r\n            },\r\n            [SEARCH]: {\r\n                actionPath: this.actionPathSearch,\r\n                run: this.runSearch,\r\n                onError: this.onErrorSearch,\r\n                onAbort: this.onAbortSearch,\r\n                onFinish: this.onFinishSearch,\r\n                onDone: this.onDoneSearch,\r\n                reduceStart: this.reduceStartSearch,\r\n                reduceError: this.reduceErrorSearch,\r\n                reduceDone: this.reduceDoneSearch,\r\n                reduceAbort: this.reduceAbortSearch,\r\n                reduceFinish: this.reduceFinishSearch,\r\n                reduceActionDone: this.reduceActionDoneSearch,\r\n            },\r\n\r\n        }\r\n    }\r\n\r\n    isTokenForRefresh = (timestamp) => {\r\n        return moment(timestamp).isBefore(moment().add(-15, 'minutes'))\r\n    }\r\n    \r\n    * runAction(action, info, state) {\r\n        const auth = yield select((st) => st.auth)\r\n        let token = auth.accessToken\r\n\r\n        if (this.isTokenForRefresh(auth.tokenTimestamp)) {\r\n            yield put(requestRefreshToken())\r\n            const refreshAction = yield take(getActionStepType(REFRESH_TOKEN, ACTION_FINISH))\r\n\r\n            if (refreshAction.error) {\r\n                throw refreshAction.error\r\n            }\r\n            token = yield select((st) => st.auth.accessToken)\r\n        }\r\n\r\n        if (!token) {\r\n            throw new ValidationException(\"no token\")\r\n        }\r\n\r\n        const results = yield info.run(action, state, token)\r\n        return results\r\n    }\r\n\r\n    isFlowAction = (action) => {\r\n        return Object.keys(this.actions).indexOf(action.action) >= 0 && action.resource === this.resource\r\n    }\r\n\r\n    resolvePattern = (step=undefined) => {\r\n        let answer = function (action) {\r\n            return action.type !== SEARCH && this.rootPath && this.isFlowAction(action) && step === action.step && action.resource === this.resource\r\n        }\r\n        return answer.bind(this)\r\n    }\r\n\r\n    resolvePatternLatest = (step=undefined) => {\r\n        let answer = function (action) {\r\n            return action.type === SEARCH && this.rootPath && this.isFlowAction(action) && step === action.step && action.resource === this.resource\r\n        }\r\n        return answer.bind(this)\r\n    }\r\n\r\n    reduceClean = (state, action) => {\r\n        if (action.path) {\r\n            return immutable.del(state, action.path)\r\n        }\r\n        return state\r\n    }\r\n\r\n    reduceExists = (state, action) => {\r\n        const path = action.path?action.path:action.id\r\n        return immutable.merge(\r\n            state,\r\n            `objects.${path}.body`,\r\n            this.useParser? this.parseResource(action.results):action.results \r\n        )\r\n    }\r\n\r\n    reduceNew = (state, action) => {\r\n        return immutable.merge(\r\n            state,\r\n            `objects.${action.results.id}.body`,\r\n            this.useParser? this.parseResource(action.results):action.results\r\n        )\r\n    }\r\n\r\n    reduceDelete = (state, action) => {\r\n        return immutable.del(state, `objects.${action.id}.body` )\r\n    }\r\n\r\n    reduceFetch = (state, action) => {\r\n        const results = action.results.results || action.results\r\n        return immutable.merge(\r\n            state, \r\n            'objects',\r\n            results.reduce((result, elem) => {\r\n                result[elem.id] = {body: this.useParser? this.parseResource(elem):elem}\r\n                return result\r\n            }, {})\r\n        )\r\n    }\r\n\r\n    parseResource = (obj) => {\r\n        return obj\r\n    }\r\n\r\n    reduceSearch = (state, action) => {\r\n        const results = action.results.results || action.results\r\n        let newState = immutable.set(state, `searches.${action.id}.result`, this.useParser? results.map(e => this.parseResource(e)):results )\r\n        newState = immutable.set(newState, `searches.${action.id}.count`, action.results.count )\r\n        return immutable.set(newState, `searches.${action.id}.total_count`, action.results.total_count )\r\n    }\r\n\r\n    reduceSelect = (state, action) => {\r\n        if (action.path) {\r\n            let actual = action.defaultObj\r\n            if (actual === undefined) {\r\n                actual = objectPath.get(state, `objects.${action.id}.body`)\r\n            }\r\n            if (actual) {\r\n                return immutable.set(\r\n                    state,\r\n                    `objects.${action.path}.body`,\r\n                    actual\r\n                )\r\n            }\r\n        }\r\n        return state\r\n    }\r\n\r\n    clearSearch = (state, action) => {\r\n        return immutable.set(state, `searches.${action.id}.result`, [])\r\n    }\r\n\r\n    actionPathGet = (action, state) => action.path?`objects.${action.path}.get`:`objects.${action.id}.get`\r\n    actionPathSelect = (action, state) => `objects.${action.path}.get`\r\n    actionPathClean = (action, state) => 'clean'\r\n    actionPathCreate = (action, state) => action.path?`objects.${action.path}.create`:`create`\r\n    actionPathClone = (action, state) => `objects.${action.id}.clone`\r\n    actionPathUpdate = (action, state) => `objects.${action.id}.update`\r\n    actionPathPatch = (action, state) => `objects.${action.id}.patch`\r\n    actionPathDelete = (action, state) => `objects.${action.id}.delete`\r\n    actionPathFetch = (action, state) => 'fetch'\r\n    actionPathSearch = (action, state) => `searches.${action.id}.status`\r\n    runGet = (action, state, token) => api.getResource(token, action.resource, action.id)\r\n    runSelect = (action, state, token) => null\r\n    runClean = (action, state, token) => null\r\n    runCreate = (action, state, token) => api.createResource(token, action.resource, action.body)\r\n    runClone = (action, state, token) => api.createResource(token, action.resource, action.body)\r\n    runUpdate = (action, state, token) => api.updateResource(token, action.resource, action.id, action.body)\r\n    runPatch = (action, state, token) => api.patchResource(token, action.resource, action.id, action.body)\r\n    runDelete = (action, state, token) => api.deleteResource(token, action.resource, action.id)\r\n    runFetch = (action, state, token) => api.fetchResources(token, action.resource, Object.assign({}, action.tempFilters, {limit: 2000}))  \r\n    runSearch = (action, state, token) => api.fetchResources(token, action.resource, Object.assign({}, action.tempFilters, {\r\n        q:action.q,\r\n        offset: action.offset,\r\n        limit: action.limit,\r\n        o: action.order,\r\n    }))\r\n    onErrorGet = (action, state, token) => {}\r\n    onErrorSelect = (action, state, token) => {}\r\n    onErrorClean = (action, state, token) => {}\r\n    onErrorCreate = (action, state, token) => {}\r\n    onErrorClone = (action, state, token) => {}\r\n    onErrorUpdate = (action, state, token) => {}\r\n    onErrorPatch = (action, state, token) => {}\r\n    onErrorDelete = (action, state, token) => {}\r\n    onErrorFetch = (action, state, token) => {}\r\n    onErrorSearch = (action, state, token) => {}\r\n    onAbortGet = (action, state, token) => {}\r\n    onAbortSelect = (action, state, token) => {}\r\n    onAbortClean = (action, state, token) => {}\r\n    onAbortCreate = (action, state, token) => {}\r\n    onAbortClone = (action, state, token) => {}\r\n    onAbortUpdate = (action, state, token) => {}\r\n    onAbortPatch = (action, state, token) => {}\r\n    onAbortDelete = (action, state, token) => {}\r\n    onAbortFetch = (action, state, token) => {}\r\n    onAbortSearch = (action, state, token) => {}\r\n    onFinishGet = (action, state, token) => {}\r\n    onFinishSelect = (action, state, token) => {}\r\n    onFinishClean = (action, state, token) => {}\r\n    onFinishCreate = (action, state, token) => {}\r\n    onFinishClone = (action, state, token) => {}\r\n    onFinishUpdate = (action, state, token) => {}\r\n    onFinishPatch = (action, state, token) => {}\r\n    onFinishDelete = (action, state, token) => {}\r\n    onFinishFetch = (action, state, token) => {}\r\n    onFinishSearch = (action, state, token) => {}\r\n    onDoneGet = (action, state, token) => {}\r\n    onDoneSelect = (action, state, token) => {}\r\n    onDoneClean = (action, state, token) => {}\r\n    onDoneCreate = (action, state, token) => {}\r\n    onDoneClone = (action, state, token) => {}\r\n    onDoneUpdate = (action, state, token) => {}\r\n    onDonePatch = (action, state, token) => {}\r\n    onDoneDelete = (action, state, token) => {}\r\n    onDoneFetch = (action, state, token) => {}\r\n    onDoneSearch = (action, state, token) => {}\r\n    reduceStartGet = (state, action) => this.reduceSelect(state, action)\r\n    reduceStartSelect = (state, action) => state\r\n    reduceStartClean = (state, action) => state\r\n    reduceStartCreate = (state, action) => state\r\n    reduceStartClone = (state, action) => state\r\n    reduceStartUpdate = (state, action) => state\r\n    reduceStartPatch = (state, action) => state\r\n    reduceStartDelete = (state, action) => state\r\n    reduceStartFetch = (state, action) => state\r\n    reduceStartSearch = (state, action) => state //this.clearSearch(state, action)\r\n    reduceErrorGet = (state, action) => state\r\n    reduceErrorSelect = (state, action) => state\r\n    reduceErrorClean = (state, action) => state\r\n    reduceErrorCreate = (state, action) => state\r\n    reduceErrorClone = (state, action) => state\r\n    reduceErrorUpdate = (state, action) => state\r\n    reduceErrorPatch = (state, action) => state\r\n    reduceErrorDelete = (state, action) => state\r\n    reduceErrorFetch = (state, action) => state\r\n    reduceErrorSearch = (state, action) => state\r\n    reduceDoneGet = (state, action) => this.reduceExists(state, action)\r\n    reduceDoneSelect = (state, action) => this.reduceSelect(state, action)\r\n    reduceDoneClean = (state, action) => this.reduceClean(state, action)\r\n    reduceDoneCreate = (state, action) => this.reduceNew(state, action)\r\n    reduceDoneClone = (state, action) => this.reduceNew(state, action)\r\n    reduceDoneUpdate = (state, action) => this.reduceExists(state, action)\r\n    reduceDonePatch = (state, action) => this.reduceExists(state, action)\r\n    reduceDoneDelete = (state, action) => this.reduceDelete(state, action)\r\n    reduceDoneFetch = (state, action) => this.reduceFetch(state, action)\r\n    reduceDoneSearch = (state, action) => this.reduceSearch(state, action)\r\n    reduceAbortGet = (state, action) => state\r\n    reduceAbortSelect = (state, action) => state\r\n    reduceAbortClean = (state, action) => state\r\n    reduceAbortCreate = (state, action) => state\r\n    reduceAbortClone = (state, action) => state\r\n    reduceAbortUpdate = (state, action) => state\r\n    reduceAbortPatch = (state, action) => state\r\n    reduceAbortDelete = (state, action) => state\r\n    reduceAbortFetch = (state, action) => state\r\n    reduceAbortSearch = (state, action) => state\r\n    reduceFinishGet = (state, action) => state\r\n    reduceFinishSelect = (state, action) => state\r\n    reduceFinishClean = (state, action) => state\r\n    reduceFinishCreate = (state, action) => state\r\n    reduceFinishClone = (state, action) => state\r\n    reduceFinishUpdate = (state, action) => state\r\n    reduceFinishPatch = (state, action) => state\r\n    reduceFinishDelete = (state, action) => state\r\n    reduceFinishFetch = (state, action) => state\r\n    reduceFinishSearch = (state, action) => state\r\n    reduceActionDoneSelect = (state, action) => state\r\n    reduceActionDoneGet = (state, action) => state\r\n    reduceActionDoneClean = (state, action) => state\r\n    reduceActionDoneCreate = (state, action) => Object.assign({}, state, { id:action.results.id })\r\n    reduceActionDoneClone = (state, action) => state\r\n    reduceActionDoneUpdate = (state, action) => state\r\n    reduceActionDonePatch = (state, action) => state\r\n    reduceActionDoneDelete = (state, action) => state\r\n    reduceActionDoneFetch = (state, action) => state\r\n    reduceActionDoneSearch = (state, action) => state\r\n} \r\n\r\n","export const IS_LOGGED = 'IS_LOGGED'\r\nexport const LOGIN = 'LOGIN'\r\nexport const LOGOUT = 'LOGOUT'\r\nexport const REFRESH_TOKEN = 'REFRESH_TOKEN'\r\n\r\nexport function requestLogin(email, password, keepSession, next){\r\n    return  {\r\n        type: LOGIN,\r\n        action: LOGIN,\r\n        email,\r\n        password,\r\n        keepSession,\r\n        next\r\n    }\r\n} \r\n\r\nexport function requestLogout() {\r\n    return {\r\n        type: LOGOUT,\r\n        action: LOGOUT,\r\n    }\r\n}\r\n\r\nexport function requestIsLogged() {\r\n    return {\r\n        type: IS_LOGGED,\r\n        action: IS_LOGGED,\r\n    }\r\n}\r\n\r\nexport function requestRefreshToken() {\r\n    return {\r\n        type: REFRESH_TOKEN,\r\n        action: REFRESH_TOKEN,\r\n    }\r\n}\r\n\r\n","import React from 'react';\r\n\r\nconst FormGroup = ({children}) => {\r\n    return (\r\n        <div className=\"form-group\">\r\n            {children}\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default FormGroup;\r\n","import React from 'react';\r\nimport FormGroup from './FormGroup'\r\n\r\nconst LabelledGroup = ({htmlFor, name, children}) => {\r\n    return (\r\n        <FormGroup>\r\n            <label htmlFor={htmlFor}>{name}:</label>\r\n            {children}\r\n        </FormGroup>\r\n    )\r\n};\r\n\r\nexport default LabelledGroup;","import React, { Component, Fragment } from 'react';\r\nimport InputText from '../forms/inputs/InputText'\r\nimport { withResourceModal }   from \"../contexts/ResourceModalContext\"\r\nimport LabelledGroup from '../forms/LabelledGroup'\r\nimport objectPath from \"../libs/object-path\";\r\nimport {searchResources} from \"../flows/ResourceFlow\";\r\nimport { connect } from 'react-redux'\r\nimport { Row, Col } from 'reactstrap'\r\nimport * as Yup from 'yup'\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n    }\r\n}\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n    }\r\n}\r\nconst mapPropsToValues = ({obj}) => {\r\n    return {\r\n            username: obj ? obj.username : '',\r\n            name: obj ? obj.name : '',\r\n            email: obj ? obj.email : '',\r\n            password: '',\r\n            confirmPassword: '',\r\n    }\r\n}\r\n\r\nconst validationSchema = (props) => {\r\n    return Yup.object().shape({\r\n        first_name: Yup.string()\r\n            .required('El nombre es obligatorio'),\r\n        username: Yup.string()\r\n            .required('El usuario es obligatorio'),\r\n        email: Yup.string()\r\n            .required('El email es obligatorio')\r\n            .email('El email ingresado no es válido'),\r\n        password: Yup\r\n            .string()\r\n            .label('Contraseña')\r\n            .min(2, 'Es demasiado corta...'),\r\n        confirmPassword: Yup\r\n            .string()\r\n            .label('Confirmar contraseña')\r\n            .test('passwords-match', 'Las contraseñas no coinciden', function(value) {\r\n              return this.parent.password === value;\r\n            }),\r\n    })\r\n}\r\n\r\nclass UserModal extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.firstInput = React.createRef();\r\n    }\r\n    \r\n    render () {\r\n        return (\r\n            <Fragment>\r\n                <Row>\r\n                    <Col>\r\n                        <LabelledGroup htmlFor=\"name\" name={'Nombre'}>\r\n                            <InputText name=\"name\" innerRef={this.firstInput}/>\r\n                        </LabelledGroup>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col>\r\n                        <LabelledGroup htmlFor=\"username\" name={'Usuario'}>\r\n                            <InputText name=\"username\"/>\r\n                        </LabelledGroup>\r\n                    </Col>\r\n                    <Col>\r\n                        <LabelledGroup htmlFor=\"email\" name={'Email'}>\r\n                            <InputText name=\"email\"/>\r\n                        </LabelledGroup>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col>\r\n                        <LabelledGroup htmlFor=\"password\" name={'Contraseña'}>\r\n                            <InputText name=\"password\" password/>\r\n                        </LabelledGroup>\r\n                    </Col>\r\n                    <Col>\r\n                        <LabelledGroup htmlFor=\"confirmPassword\" name={'Confirmar Contraseña'}>\r\n                            <InputText name=\"confirmPassword\" password/>\r\n                        </LabelledGroup>\r\n                    </Col>\r\n                </Row>\r\n\r\n            </Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withResourceModal(\r\n    mapPropsToValues, \r\n    \"Usuario\",\r\n    \"\",\r\n    validationSchema,\r\n    connect(mapStateToProps, mapDispatchToProps)(UserModal)\r\n);\r\n\r\n","import React, { Component } from \"react\";\r\nimport FormModal from '../modals/FormModal'\r\nimport { connect } from 'react-redux'\r\nimport objectPath from '../libs/object-path'\r\nimport { createResource, updateResource } from '../flows/ResourceFlow'\r\nimport { withModal } from '../contexts/ModalsContext.jsx'\r\nimport { withFormik } from 'formik'\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    let opPath = '';\r\n    let obj = undefined;\r\n    let objLoading = false;\r\n    const operation = ownProps.openData.operation\r\n    switch (operation) {\r\n        case \"create\": \r\n            opPath = 'create';\r\n            break;\r\n        case \"update\":\r\n            opPath = `objects.${ownProps.openData.objId}.${operation}`;\r\n            obj = objectPath.get(state, `${ownProps.modalId}.objects.${ownProps.openData.objId}.body`);\r\n            objLoading = obj === undefined\r\n            break;\r\n        case \"clone\":\r\n            opPath = 'create';\r\n            obj = objectPath.get(state, `${ownProps.modalId}.objects.${ownProps.openData.objId}.body`);\r\n            objLoading = obj === undefined\r\n            break;\r\n        default:\r\n            opPath = '';\r\n            obj = undefined;\r\n            objLoading = false\r\n    }\r\n    return {\r\n        serverErrors: objectPath.get(state, `${ownProps.modalId}.${opPath}.error.errors`, undefined),\r\n        submitting: objectPath.get(state, `${ownProps.modalId}.${opPath}.working`) > 0,\r\n        submitted: objectPath.get(state, `${ownProps.modalId}.${opPath}.done`),\r\n        objLoading: objLoading,\r\n        obj: obj,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n    return {\r\n        createResource: (body) => dispatch(createResource(ownProps.modalId, body)),\r\n        updateResource: (body, id) => dispatch(updateResource(ownProps.modalId, id, body))\r\n    }\r\n}\r\n\r\nexport function withFormModal(mapPropsToValues, validationSchema, WrappedComponent) {\r\n    const answer = class extends Component {\r\n        onSubmitted = () => {\r\n          const { setSubmitting, setErrors, serverErrors, resetForm} = this.props\r\n          setSubmitting(false); \r\n          if (serverErrors) {\r\n            setErrors(serverErrors)\r\n          } else {\r\n            resetForm()\r\n          }\r\n        }\r\n\r\n        render () {\r\n            return <WrappedComponent \r\n                operation={this.props.openData.operation}\r\n                onSubmitted={this.onSubmitted}\r\n                {...this.props} \r\n            />\r\n        }\r\n    }\r\n    return withModal((withFormik({ \r\n        validationSchema: validationSchema,\r\n        handleSubmit: (values, { isSubmitting, props }) => {\r\n          if (!isSubmitting) {\r\n              const { openData, obj, modalId } = props;\r\n              const operation = openData.operation\r\n              console.log(\"////asdasd\")\r\n              if (operation === 'create' || operation === 'clone') {\r\n                  console.log(\"ENTROO\", createResource)\r\n                    \r\n                createResource(modalId, values)\r\n              } else if (operation === 'update') {\r\n                updateResource(values, obj.id)\r\n              }\r\n          }\r\n        },\r\n        mapPropsToValues:mapPropsToValues\r\n    })(answer)))\r\n}\r\n\r\nexport function withResourceModal(mapPropsToValues, name, description, validationSchema, WrappedComponent) {\r\n    const answer = class extends Component {\r\n        componentDidUpdate(prevProps) {\r\n            if ( \r\n                (this.props.obj === undefined && prevProps.obj !== undefined) ||\r\n                (this.props.obj !== undefined && prevProps.obj === undefined) || \r\n                (this.props.obj !== undefined && prevProps.obj !== undefined && prevProps.obj.id !== this.props.obj.id ) \r\n            ) {\r\n                this.props.resetForm(mapPropsToValues(this.props))\r\n            }\r\n        }\r\n\r\n        getActionName = (operation) => {\r\n            switch (operation) {\r\n                case 'create':\r\n                    return 'Crear';\r\n                case 'update':\r\n                    return 'Editar';\r\n                case 'clone':\r\n                    return 'Clonar';\r\n                default:\r\n                    return \"\";\r\n\r\n            }\r\n        }\r\n\r\n        render () {\r\n            const { modalId, submitted, dirty, resetForm, submitting, handleSubmit, objLoading, onSubmitted, operation} = this.props\r\n            return (\r\n              <FormModal\r\n                submitted={submitted}\r\n                submitting={submitting}\r\n                modalId={modalId}\r\n                onClose={() => resetForm()}\r\n                dirty={dirty}\r\n                onSubmit={handleSubmit}\r\n                name={`${this.getActionName(operation)} ${name}`}\r\n                loading={objLoading}\r\n                description={description}\r\n                onSubmitted={onSubmitted}\r\n                operation={operation}\r\n              >\r\n                <WrappedComponent\r\n                  {...this.props}\r\n                />\r\n              </FormModal>\r\n            )\r\n        }\r\n    }\r\n    return withFormModal(\r\n        mapPropsToValues,\r\n        validationSchema,\r\n        answer,\r\n    )\r\n}","import {configure} from 'react-hotkeys';\r\nimport UserModal from './UserModal';\r\n\r\nconfigure({\r\n    //logLevel:'verbose'\r\n})\r\n\r\nexport const keyMap = {\r\n  users: { name: 'Usuario', sequences: [], modalClass: UserModal },\r\n};\r\n","\r\nimport React, { Component, createContext } from \"react\";\r\nimport { GlobalHotKeys } from \"react-hotkeys\";\r\nimport { keyMap } from '../modals/keymaps'\r\n\r\n\r\nexport const ModalsContext = createContext({\r\n  isOpen: null,\r\n  toggleModal: (id) => null,\r\n  openModal: (id, data) =>  null,\r\n  closeModal: (id) => null,\r\n  openData: null,\r\n  level: null,\r\n});\r\n\r\nexport default class ModalsProvider extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isOpen: {},\r\n      toggleModal: this.toggleModal,\r\n      openModal: this.openModal,\r\n      closeModal: this.closeModal,\r\n      openData: {},\r\n      level: -1,\r\n    };\r\n  }\r\n\r\n  setCloseModal = (id) => {\r\n      this.setState(prevState => ({\r\n          isOpen: Object.assign({}, prevState.isOpen, {[id]:undefined}),\r\n          level: prevState.level > 1 ? prevState.level - 1 : 0\r\n      }));\r\n  }\r\n\r\n  setOpenModal = (id, data) => {\r\n    console.log(keyMap, id)\r\n    this.setState(prevState => {\r\n      let answer = {\r\n        isOpen: Object.assign({}, prevState.isOpen, {[id]: true}),\r\n        level: prevState.level + 1\r\n      }\r\n      if (data) {\r\n        answer.openData = Object.assign({}, prevState.openData, {[id]:data})\r\n      }\r\n      return answer\r\n    })\r\n  }\r\n\r\n  toggleModal = (id) => {\r\n    if (this.state.isOpen[id] !== undefined) {\r\n        this.setCloseModal(id)\r\n    } else {\r\n        this.setOpenModal(id)\r\n    }\r\n  }\r\n\r\n  openModal = (id, data) => {\r\n    if (this.state.isOpen[id] === undefined) {\r\n      this.setOpenModal(id, data)\r\n    }\r\n  }\r\n\r\n  closeModal = (id) => { \r\n    if (this.state.isOpen[id] !== undefined) {\r\n      this.setCloseModal(id)\r\n    }\r\n  }\r\n\r\n  getKeyMap = (keyMap) => {\r\n    // if (this.props.ware_types.length > 0) {\r\n    //     keyMap.wares.sequences = []\r\n    //     this.props.ware_types.forEach((wt) => {\r\n    //         keyMap.wares.sequences.push(\"alt+w \" + wt.shortcut_key)\r\n    //     })\r\n    // }\r\n\r\n    // if (this.props.variant_types.length > 0) {\r\n    //     keyMap.variants.sequences = []\r\n    //     this.props.variant_types.forEach((wt) => {\r\n    //         keyMap.variants.sequences.push(\"alt+v \" + wt.shortcut_key)\r\n    //     })\r\n    // }\r\n\r\n    // if (this.props.lot_types.length > 0) {\r\n    //     keyMap.lots.sequences = []\r\n    //     this.props.lot_types.forEach((wt) => {\r\n    //         keyMap.lots.sequences.push(\"alt+l \" + wt.shortcut_key)\r\n    //     })\r\n    // }\r\n\r\n    return keyMap\r\n  }\r\n\r\n  getHandlers = (keyMap) => {\r\n    return Object.keys(keyMap).reduce((handlers, key) => { \r\n      handlers[key] = (e) => {\r\n        this.openModal(key, {key: e.key})\r\n      }\r\n      return handlers\r\n    }, {})\r\n  }\r\n\r\n  render() {\r\n    const { children } = this.props;\r\n    const newKeyMap = this.getKeyMap(keyMap)\r\n    const newHandlers = this.getHandlers(newKeyMap)\r\n    console.log(this.state)\r\n    return (\r\n      <ModalsContext.Provider value={this.state}>\r\n        <GlobalHotKeys keyMap={newKeyMap} handlers={newHandlers} allowChanges={true}/>\r\n        {children}\r\n      </ModalsContext.Provider>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport function withModals(WrappedComponent) {\r\n    return class extends Component {\r\n        render () {\r\n            return (\r\n                <ModalsContext.Consumer>\r\n                  {({isOpen, toggleModal, openModal, closeModal, openData }) => (\r\n                    <WrappedComponent {...this.props} \r\n                      isModalOpen={isOpen} \r\n                      toggleModal={toggleModal} \r\n                      openModal={openModal}\r\n                      closeModal={closeModal}\r\n                      openData={openData}\r\n                      modalLevel={isOpen}\r\n                    />\r\n                  )}\r\n                </ModalsContext.Consumer>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport function withModal(WrappedComponent) {\r\n    return class extends Component {\r\n        render () {\r\n            return (\r\n                <ModalsContext.Consumer>\r\n                  {({isOpen, toggleModal, openModal, closeModal, openData}) => (\r\n                    <WrappedComponent {...this.props} \r\n                      isModalOpen={isOpen[this.props.modalId] !== undefined} \r\n                      toggleModal={() => toggleModal(this.props.modalId)}\r\n                      openModal={openModal}\r\n                      closeModal={() => closeModal(this.props.modalId)}\r\n                      openData={openData[this.props.modalId] || {}}\r\n                      modalLevel={isOpen[this.props.modalId] || 0}\r\n                    />\r\n                  )}\r\n                </ModalsContext.Consumer>\r\n            );\r\n        }\r\n    }\r\n}","import React, { Component, Children, Fragment, cloneElement } from 'react';\r\nimport {withModals} from \"../contexts/ModalsContext\";\r\nimport objectPath from \"../libs/object-path\";\r\nimport  { Plus } from 'react-feather'\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        submitted: objectPath.get(state, `${ownProps.resource}.create.done`),\r\n    }\r\n}\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n    return {}\r\n}\r\n\r\nclass AddButton extends Component {\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { submitted, onDone } = this.props;\r\n        if (!prevProps.submitted && submitted === true && onDone) {\r\n            onDone()\r\n        }\r\n    }\r\n    \r\n    handleClick = () => {\r\n        console.log(\"ENTROO\", this.props.resource, this.props)\r\n        this.props.openModal(this.props.resource, {operation: 'create', initialValues: this.props.initialValues});\r\n    }\r\n\r\n    render() {\r\n        const { children, disabled } = this.props;\r\n        if (children) {\r\n            return (\r\n                <Fragment>\r\n                    {Children.map(children, child => (\r\n                      cloneElement(child, {\r\n                        onClick: disabled? null : this.handleClick,\r\n                      })))\r\n                    }\r\n                </Fragment>\r\n            )\r\n        }\r\n        return <Plus size={24} className=\"ml-2 clickable\" onClick={disabled ? null : this.handleClick} title={'Agregar'}/>\r\n    }\r\n}\r\n\r\nexport default withModals((AddButton));\r\n","import React, { Fragment } from 'react'\r\nimport { keyMap } from './keymaps'\r\n\r\n// para agregaar un nuevo modal al sistema importarlo y agregalo uno abao\r\n// del otro con su id correspondiente.\r\nexport function Modals(props) {\r\n    return (\r\n        <Fragment>\r\n            { Object.keys(keyMap).map((key) => {\r\n                const Modal = keyMap[key].modalClass\r\n                return <Modal key={key} modalId={key}/>\r\n            })}\r\n        </Fragment>\r\n    )\r\n}\r\n","import React, { Component, Fragment } from 'react';\r\n\r\nclass Home extends Component {\r\n    \r\n    render () {\r\n        return (\r\n            <Fragment>\r\n               \r\n            </Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Home;\r\n\r\n","import React from 'react';\r\nimport logo from './logo.svg';\r\nimport './App.css';\r\nimport AddButton from './components/AddButton';\r\nimport { Button } from 'reactstrap';\r\nimport ModalsProvider from './contexts/ModalsContext';\r\nimport { Modals } from './modals/index'\r\nimport Home from './views/Home';\r\n\r\nfunction App() {\r\n\r\n  return (\r\n    <ModalsProvider>\r\n      <div className=\"App\">\r\n        <header className=\"App-header\">\r\n          <AddButton resource={\"users\"}>\r\n            <Button color={\"primary\"}>Prueba</Button>\r\n          </AddButton>\r\n          <Modals/>\r\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />\r\n        </header>\r\n        <Home/>\r\n      </div>\r\n    </ModalsProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import { combineReducers } from 'redux' \r\nimport createSagaMiddleware from 'redux-saga'\r\nimport { createStore, applyMiddleware } from 'redux'\r\nimport { createLogger } from 'redux-logger'\r\nimport { requestIsLogged } from './AuthFlow'\r\n\r\nimport { UserFlow } from './UserFlow'\r\n\r\nconst flows = [\r\n    new UserFlow('users'),\r\n]\r\n\r\nconst mainReducer = combineReducers(\r\n    flows.reduce((answer, flow) => { answer[flow.rootPath]=flow.reducer; return answer }, {})\r\n)\r\n\r\nconst sagasMiddleware = createSagaMiddleware()\r\n\r\nlet store = createStore(\r\n  mainReducer, \r\n  applyMiddleware(sagasMiddleware)\r\n)\r\n\r\nif (process.env.NODE_ENV !== 'production')  {\r\n    const reduxLogger = createLogger({});\r\n    store = createStore(\r\n      mainReducer, \r\n      applyMiddleware(sagasMiddleware, reduxLogger)\r\n      // applyMiddleware(sagasMiddleware)\r\n    )\r\n}\r\n\r\n\r\nflows.forEach(flow => sagasMiddleware.run(flow.saga))\r\n\r\nstore.dispatch(requestIsLogged())\r\n\r\nexport { store }\r\n","import { ResourceFlow } from './ResourceFlow'\r\n\r\nexport class UserFlow extends ResourceFlow {\r\n    constructor(rootPath) {\r\n        super(rootPath, 'users')\r\n    }\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport \"./index.scss\"\r\nimport * as Sentry from '@sentry/browser';\r\nimport settings from './settings'\r\nimport { store } from './flows'\r\nimport { Provider } from 'react-redux'\r\n// Sentry\r\nSentry.init({ dsn: settings.SETNRY_DSN });\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}